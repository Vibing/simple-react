{"version":3,"sources":["src/react-dom/dom.js","src/react-dom/diff.js","src/react/set-state-queue.js","src/react/component.js","src/react/create-element.js","src/react/index.js","src/react-dom/render.js","src/react-dom/index.js","src/index.js"],"names":["setAttribute","dom","name","value","test","toLowerCase","node","style","cssText","removeAttribute","diff","renderComponent","vnode","container","ret","diffNode","parentNode","appendChild","out","undefined","String","nodeType","textContent","document","createTextNode","replaceChild","tag","diffComponent","isSameNodeType","createElement","childNodes","map","children","length","diffChildren","diffAttributes","vchildren","domChildren","keyed","i","child","key","keyedLen","push","min","childrenLen","vchild","j","c","f","nextSibling","removeNode","insertBefore","_component","oldDom","constructor","setComponentProps","attrs","base","unmountComponent","createComponent","component","props","componentWillMount","componentWillReceiveProps","renderer","render","componentWillUpdate","componentDidUpdate","componentDidMount","inst","prototype","Component","componentWillUnmount","nodeName","old","attributes","attr","removeChild","enqueueSetState","setStateQueue","renderQueue","defer","fn","Promise","resolve","then","stateChange","flush","some","item","shift","prevState","Object","assign","state","isReactComponent","_render","_container","textNode","keys","forEach","App","React","ReactDOM","getElementById"],"mappings":"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","file":"src.4ca65a4c.map","sourceRoot":"..","sourcesContent":["export function setAttribute(dom, name, value) {\n  // 如果属性名是class，则改回className\n  if (name === 'className') name = 'class';\n\n  // 如果属性名是onXXX，则是一个时间监听方法\n  if (/on\\w+/.test(name)) {\n    name = name.toLowerCase();\n    dom[name] = value || '';\n    // 如果属性名是style，则更新style对象\n  } else if (name === 'style') {\n    if (!value || typeof value === 'string') {\n      node.style.cssText = value || '';\n    } else if (value && typeof value === 'object') {\n      for (let name in value) {\n        // 可以通过style={ width: 20 }这种形式来设置样式，可以省略掉单位px\n        dom.style[name] =\n          typeof value[name] === 'number' ? value[name] + 'px' : value[name];\n      }\n    }\n    // 普通属性则直接更新属性\n  } else {\n    if (name in dom) {\n      dom[name] = value || '';\n    }\n    if (value) {\n      dom.setAttribute(name, value);\n    } else {\n      dom.removeAttribute(name, value);\n    }\n  }\n}\n","import { Componet } from '../react';\nimport { setAttribute } from './dom';\n\n/**\n * @param {HTMLElement} dom 真实DOM\n * @param {vnode} vnode 虚拟DOM\n * @param {HTMLElement} container 容器\n * @returns {HTMLElement} 更新后的DOM\n */\nexport function diff(dom, vnode, container) {\n  const ret = diffNode(dom, vnode);\n\n  if (container && ret.parentNode !== container) {\n    container.appendChild(ret);\n  }\n\n  return ret;\n}\n\nfunction diffNode(dom, vnode) {\n  let out = dom;\n\n  if (vnode === undefined || vnode === null || typeof vnode === 'boolean')\n    vnode = '';\n\n  if (typeof vnode === 'number') vnode = String(vnode);\n\n  // diff text node\n  if (typeof vnode === 'string') {\n    // 如果当前的DOM就是文本节点，则直接更新内容\n    if (dom && dom.nodeType === 3) {\n      // nodeType: https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType\n      if (dom.textContent !== vnode) {\n        dom.textContent = vnode;\n      }\n      // 如果DOM不是文本节点，则新建一个文本节点DOM，并移除掉原来的\n    } else {\n      out = document.createTextNode(vnode);\n      if (dom && dom.parentNode) {\n        dom.parentNode.replaceChild(out, dom);\n      }\n    }\n\n    return out;\n  }\n\n  if (typeof vnode.tag === 'function') {\n    return diffComponent(dom, vnode);\n  }\n\n  //\n  if (!dom || !isSameNodeType(dom, vnode)) {\n    out = document.createElement(vnode.tag);\n\n    if (dom) {\n      [...dom.childNodes].map(out.appendChild); // 将原来的子节点移到新节点下\n\n      if (dom.parentNode) {\n        dom.parentNode.replaceChild(out, dom); // 移除掉原来的DOM对象\n      }\n    }\n  }\n\n  if (\n    (vnode.children && vnode.children.length > 0) ||\n    (out.childNodes && out.childNodes.length > 0)\n  ) {\n    diffChildren(out, vnode.children);\n  }\n\n  diffAttributes(out, vnode);\n\n  return out;\n}\n\nfunction diffChildren(dom, vchildren) {\n  const domChildren = dom.childNodes;\n  const children = [];\n\n  const keyed = {};\n\n  if (domChildren.length > 0) {\n    for (let i = 0; i < domChildren.length; i++) {\n      const child = domChildren[i];\n      const key = child.key;\n      if (key) {\n        keyedLen++;\n        keyed[key] = child;\n      } else {\n        children.push(child);\n      }\n    }\n  }\n\n  if (vchildren && vchildren.length > 0) {\n    let min = 0;\n    let childrenLen = children.length;\n\n    for (let i = 0; i < vchildren.length; i++) {\n      const vchild = vchildren[i];\n      const key = vchild.key;\n      let child;\n\n      if (key) {\n        if (keyed[key]) {\n          child = keyed[key];\n          keyed[key] = undefined;\n        }\n      } else if (min < childrenLen) {\n        for (let j = min; j < childrenLen; j++) {\n          let c = children[j];\n\n          if (c && isSameNodeType(c, vchild)) {\n            child = c;\n            children[j] = undefined;\n\n            if (j === childrenLen - 1) childrenLen--;\n            if (j === min) min++;\n            break;\n          }\n        }\n      }\n\n      child = diffNode(child, vchild);\n\n      const f = domChildren[i];\n      if (child && child !== dom && child !== f) {\n        if (!f) {\n          dom.appendChild(child);\n        } else if (child === f.nextSibling) {\n          removeNode(f);\n        } else {\n          dom.insertBefore(child, f);\n        }\n      }\n    }\n  }\n}\n\nfunction diffComponent(dom, vnode) {\n  let c = dom && dom._component;\n  let oldDom = dom;\n\n  // 如果组件类型没有变化，则重新set props\n  if (c && c.constructor === vnode.tag) {\n    setComponentProps(c, vnode.attrs);\n    dom = c.base;\n    // 如果组件类型变化，则移除掉原来组件，并渲染新的组件\n  } else {\n    if (c) {\n      unmountComponent(c);\n      oldDom = null;\n    }\n\n    c = createComponent(vnode.tag, vnode.attrs);\n\n    setComponentProps(c, vnode.attrs);\n    dom = c.base;\n\n    if (oldDom && dom !== oldDom) {\n      oldDom._component = null;\n      removeNode(oldDom);\n    }\n  }\n\n  return dom;\n}\n\nfunction setComponentProps(component, props) {\n  if (!component.base) {\n    if (component.componentWillMount) component.componentWillMount();\n  } else if (component.componentWillReceiveProps) {\n    component.componentWillReceiveProps(props);\n  }\n\n  component.props = props;\n\n  renderComponent(component);\n}\n\nexport function renderComponent(component) {\n  let base;\n\n  const renderer = component.render();\n\n  if (component.base && component.componentWillUpdate) {\n    component.componentWillUpdate();\n  }\n\n  base = diffNode(component.base, renderer);\n\n  if (component.base) {\n    if (component.componentDidUpdate) component.componentDidUpdate();\n  } else if (component.componentDidMount) {\n    component.componentDidMount();\n  }\n\n  component.base = base;\n  base._component = component;\n}\n\nfunction createComponent(component, props) {\n  let inst;\n\n  if (component.prototype && component.prototype.render) {\n    inst = new component(props);\n  } else {\n    inst = new Component(props);\n    inst.constructor = component;\n    inst.render = function() {\n      return this.constructor(props);\n    };\n  }\n\n  return inst;\n}\n\nfunction unmountComponent(component) {\n  if (component.componentWillUnmount) component.componentWillUnmount();\n  removeNode(component.base);\n}\n\nfunction isSameNodeType(dom, vnode) {\n  if (typeof vnode === 'string' || typeof vnode === 'number') {\n    return dom.nodeType === 3;\n  }\n\n  if (typeof vnode.tag === 'string') {\n    return dom.nodeName.toLowerCase() === vnode.tag.toLowerCase();\n  }\n\n  return dom && dom._component && dom._component.constructor === vnode.tag;\n}\n\nfunction diffAttributes(dom, vnode) {\n  const old = {}; // 当前DOM的属性\n  const attrs = vnode.attrs; // 虚拟DOM的属性\n\n  for (let i = 0; i < dom.attributes.length; i++) {\n    const attr = dom.attributes[i];\n    old[attr.name] = attr.value;\n  }\n\n  // 如果原来的属性不在新的属性当中，则将其移除掉（属性值设为undefined）\n  for (let name in old) {\n    if (!(name in attrs)) {\n      setAttribute(dom, name, undefined);\n    }\n  }\n\n  // 更新新的属性值\n  for (let name in attrs) {\n    if (old[name] !== attrs[name]) {\n      setAttribute(dom, name, attrs[name]);\n    }\n  }\n}\n\nfunction removeNode(dom) {\n  if (dom && dom.parentNode) {\n    dom.parentNode.removeChild(dom);\n  }\n}\n","import { renderComponent } from '../react-dom/diff';\n\nconst setStateQueue = [];\nconst renderQueue = [];\n\nfunction defer(fn) {\n  return Promise.resolve().then(fn);\n}\n\nexport function enqueueSetState(stateChange, component) {\n  if (setStateQueue.length === 0) {\n    defer(flush);\n  }\n  setStateQueue.push({\n    stateChange,\n    component\n  });\n\n  if (!renderQueue.some(item => item === component)) {\n    renderQueue.push(component);\n  }\n}\n\nfunction flush() {\n  let item, component;\n  while ((item = setStateQueue.shift())) {\n    const { stateChange, component } = item;\n\n    // 如果没有prevState，则将当前的state作为初始的prevState\n    if (!component.prevState) {\n      component.prevState = Object.assign({}, component.state);\n    }\n\n    // 如果stateChange是一个方法，也就是setState的第二种形式\n    if (typeof stateChange === 'function') {\n      Object.assign(\n        component.state,\n        stateChange(component.prevState, component.props)\n      );\n    } else {\n      // 如果stateChange是一个对象，则直接合并到setState中\n      Object.assign(component.state, stateChange);\n    }\n\n    component.prevState = component.state;\n  }\n\n  while ((component = renderQueue.shift())) {\n    renderComponent(component);\n  }\n}\n","import { enqueueSetState } from './set-state-queue';\n\nclass Component {\n  constructor(props = {}) {\n    this.isReactComponent = true;\n\n    this.state = {};\n    this.props = props;\n  }\n\n  setState(stateChange) {\n    enqueueSetState(stateChange, this);\n  }\n}\n\nexport default Component;\n","function createElement(tag, attrs, ...children) {\n  attrs = attrs || {};\n\n  return {\n    tag,\n    attrs,\n    children,\n    key: attrs.key || null\n  };\n}\n\nexport default createElement;\n","import Component from './component.js';\nimport createElement from './create-element.js';\n\nexport default {\n  Component,\n  createElement\n};\n","import { diff } from './diff';\n\nfunction _render(vnode, container) {\n  if (vnode === undefined) return;\n\n  if (vnode.isReactComponent) {\n    const component = vnode;\n\n    if (component._container) {\n      if (component.componentWillUpdate) {\n        component.componentWillUpdate();\n      }\n    } else if (component.componentWillMount) {\n      component.componentWillMount();\n    }\n\n    component._container = container; // 保存父容器信息，用于更新\n\n    vnode = component.render();\n  }\n\n  if (typeof vnode === 'string' || typeof vnode === 'number') {\n    let textNode = document.createTextNode(vnode);\n    return container.appendChild(textNode);\n  }\n\n  const dom = document.createElement(vnode.tag);\n\n  if (vnode.attrs) {\n    Object.keys(vnode.attrs).forEach(key => {\n      const value = vnode.attrs[key];\n\n      if (key === 'className') key = 'class';\n\n      // 如果是事件监听函数，则直接附加到dom上\n      if (typeof value === 'function') {\n        dom[key.toLowerCase()] = value;\n      } else {\n        dom.setAttribute(key, vnode.attrs[key]);\n      }\n    });\n  }\n\n  if (vnode.children) {\n    vnode.children.forEach(child => _render(child, dom));\n  }\n\n  return container.appendChild(dom);\n}\n\nfunction render(vnode, container, dom) {\n  return diff(dom, vnode, container);\n}\n\nexport default render;\n","import render from './render';\n\nexport default {\n  render\n};\n","import React from './react';\nimport ReactDOM from './react-dom';\n\nclass App extends React.Component {\n  render() {\n    return <h1>Hello,World!</h1>;\n  }\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n"]}